<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agregados [Modelado de dominio]</title>
    <style>
        body {
            margin: 0;
            font-family: 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #a259c6 0%, #6d28d9 100%);
            color: #222;
        }

        .container {
            display: flex;
            min-height: 100vh;
        }

        .sidebar {
            width: 270px;
            background: rgba(255, 255, 255, 0.12);
            padding: 2rem 1rem 1rem 1rem;
            box-shadow: 2px 0 8px rgba(0, 0, 0, 0.04);
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .sidebar h2 {
            color: #fff;
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
            letter-spacing: 1px;
        }

        .sidebar ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .sidebar li {
            margin-bottom: 0.5rem;
        }

        .sidebar li a {
            color: #f3e8ff;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            display: block;
            padding: 0.5em 0.8em;
            border-radius: 8px;
            border-left: 3px solid transparent;
        }

        .sidebar li a:hover {
            color: #fbbf24;
            background: rgba(255, 255, 255, 0.1);
        }

        .sidebar li a.active {
            color: #fbbf24;
            background: rgba(255, 255, 255, 0.08);
            border-left: 3px solid #fbbf24;
            font-weight: 600;
        }

        .sidebar .home-link {
            color: #fbbf24;
            font-weight: bold;
            margin-bottom: 1.5rem;
            display: block;
        }

        .main-content {
            flex: 1;
            background: #fff;
            border-radius: 18px;
            margin: 2rem;
            padding: 2rem 2.5rem 2.5rem 2.5rem;
            box-shadow: 0 4px 32px 0 rgba(80, 0, 120, 0.10);
            display: flex;
            flex-direction: column;
            min-width: 0;
        }

        header {
            border-bottom: 2px solid #f3e8ff;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        header h1 {
            font-size: 1.7rem;
            color: #6d28d9;
            margin: 0;
            font-weight: 700;
        }

        .video-frame {
            width: 100%;
            max-width: 800px;
            aspect-ratio: 16/9;
            margin: 0 auto 1.5rem auto;
            background: #f3e8ff;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            box-shadow: 0 2px 12px 0 rgba(80, 0, 120, 0.08);
        }

        .notes-section {
            margin-top: 1.5rem;
            padding: 1.2rem 1.5rem;
            background: #f3e8ff;
            border-radius: 10px;
            min-height: 120px;
            color: #222;
            font-size: 1.08rem;
        }

        .nav-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
            margin-top: 2.5rem;
        }

        .nav-buttons button {
            background: linear-gradient(90deg, #a259c6 0%, #6d28d9 100%);
            color: #fff;
            border: none;
            border-radius: 8px;
            padding: 0.7rem 1.5rem;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
        }

        .nav-buttons button:hover {
            background: linear-gradient(90deg, #6d28d9 0%, #a259c6 100%);
        }

        @media (max-width: 900px) {
            .container {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                flex-direction: row;
                overflow-x: auto;
            }

            .main-content {
                margin: 1rem;
                padding: 1rem;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <nav class="sidebar">
            <a href="#" onclick="goHome();return false;" class="back-link">⬅️ Home</a>
            <h2>Cursos</h2>
            <ul id="sidebarList"></ul>
        </nav>
        <main class="main-content">
            <header>
                <h1 id="courseTitle"></h1>
            </header>
            <div class="video-frame" id="videoFrame"></div>
            <section class="notes-section" id="notesSection"></section>
            <div class="nav-buttons">
                <button id="prevBtn"></button>
                <button id="nextBtn"></button>
            </div>
        </main>
    </div>
    <script>
        const courses = [
            {
                title: "01 Qué son los agregados y aggregate roots",
                videoId: "fk5gHvTOjjU",
                notes: [
                ]
            },
            {
                title: "02 Como se relacionan los agregados",
                videoId: "tX4c3dGBfmA",
                notes: [
                ]
            },
            {
                title: "03 Problemas de los agregados pequeños",
                videoId: "9fhUcuNPXGI",
                notes: [
                ]
            },
            {
                title: "04  Utiliza una capa de orquestación para gestionar tus agregados",
                videoId: "o1MZe58JKPk",
                notes: [
                ]
            },
            {
                title: "05  La importancia de los Bounded Contexts",
                videoId: "PtHAj4y9pFk",
                notes: [
                ]
            },
            {
                title: "06  CQRS Agregados para escritura vs proyecciones para lectura",
                videoId: "fOVk_FCnxz4",
                notes: [
                ]

            },
            {
                title: "07  Por qué el identificador lo tiene que generar el frontend",
                videoId: "4ZTC_EXIPnA",
                notes: [
                ]
            },
            {
                title: "08  Reduce el acoplamiento utilizando un Agregado para cada módulo",
                videoId: "a_YjkRszD_I",
                notes: [
                ]
            },
            {
                title: "09  Servicios de dominio vs  Agregados ¿Dónde van las reglas de negocio",
                videoId: "hXx9q2CrPkU",
                notes: [
                ]
            },
            {
                title: "10  Exprime el polimorfismo con los Agregados",
                videoId: "t_8u0asTGlA",
                notes: [
                    { type: "text", content: "💻 Puedes ver el código de este vídeo en:" },
                    { type: "link", content: "https://github.com/CodelyTV/aggregates-course/tree/main/03-define_aggregates/3-domain_services_vs_aggregates" },
                    { type: "text", content: "Script para poder ver qué ficheros se modifican juntos (cambia el 5 de la última línea para mostrar más resultados):" },
                    {
                        type: "code",
                        content: `git log --pretty=format: --name-only |
awk 'BEGIN { RS = "" } { for (i = 1; i <= NF; i++) for (j = i + 1; j <= NF; j++) print $i " <-> " $j }' |
sort |
uniq -c |
sort -mn |
head -n 5`
                    }
                ]
            },
            {
                title: "11  Validaciones de Agregados cuando cambia el esquema de la BD",
                videoId: "3AQ1CyO9o90",
                notes: [
                ]
            },
            {
                title: "12  Agregados 100% encapsulados Uso de toPrimitives",
                videoId: "x88MsTJ20Bs",
                notes: [
                ]
            },
            {
                title: "13  Promoción de módulo a Bounded Context ¿Qué pasa con mis agregados?",
                videoId: "cWsAsZlKYxw",
                notes: [
                ]
            },
            {
                title: "14  Value Object vs Entidad vs Agregado ¿1 Tabla = 1 Agregado",
                videoId: "Nv_TrDCetww",
                notes: [
                ]
            },
            {
                title: "15  Cómo gestionar agregados que tienen millones de registros",
                videoId: "1bb1T5kLYYI",
                notes: [
                ]
            },
            {
                title: "16  Paginación sin ensuciar los Agregados utilizando el patrón Criteria",
                videoId: "6HJjDl3HiYY",
                notes: [
                ]
            },
            {
                title: "17 Cómo testear con Agregados si dentro tienen eventos de dominio",
                videoId: "S8c7cRJw4BQ",
                notes: [
                ]
            },
            {
                title: "18 Cómo implementar código DDD usando Inteligencia Artificial",
                videoId: "vJFEIntw-tI",
                notes: [
                ]
            }
        ];

        let currentIndex = 0;

        function renderSidebar() {
            const sidebarList = document.getElementById('sidebarList');
            sidebarList.innerHTML = '';
            courses.forEach((course, idx) => {
                const li = document.createElement('li');
                li.innerHTML = `<a href="#" class="${idx === currentIndex ? 'active' : ''}" onclick="goToCourse(${idx});return false;">${course.title}</a>`;
                sidebarList.appendChild(li);
            });
        }

        function renderCourse(idx) {
            const course = courses[idx];
            document.getElementById('courseTitle').textContent = course.title;
            document.getElementById('videoFrame').innerHTML =
                `<iframe width="100%" height="100%" src="https://www.youtube.com/embed/${course.videoId}" frameborder="0" allowfullscreen></iframe>`;
            renderNotes(course.notes);

            // Navigation buttons
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            prevBtn.textContent = idx === 0 ? '🏠 Home' : '← Anterior';
            nextBtn.textContent = idx === courses.length - 1 ? '🏠 Home' : 'Siguiente →';
            prevBtn.onclick = () => idx === 0 ? goHome() : goToCourse(idx - 1);
            nextBtn.onclick = () => idx === courses.length - 1 ? goHome() : goToCourse(idx + 1);
        }
        function renderNotes(notes) {
            const notesSection = document.getElementById('notesSection');
            notesSection.innerHTML = '<strong>Notas:</strong>';

            if (!notes || notes.length === 0) {
                notesSection.innerHTML += '<p><em>Este curso no tiene notas disponibles.</em></p>';
                return;
            }

            notes.forEach(note => {
                if (note.type === 'text') {
                    notesSection.innerHTML += `<p>${note.content}</p>`;
                } else if (note.type === 'link') {
                    notesSection.innerHTML += `<p><a href="${note.content}" target="_blank">${note.content}</a></p>`;
                } else if (note.type === 'image') {
                    notesSection.innerHTML += `<img src="${note.content}" alt="Imagen" style="max-width:100%;margin:1em 0;">`;
                } else if (note.type === 'code') {
                    notesSection.innerHTML += `
        <pre style="background:#f4f4f4;padding:1em;border-radius:8px;overflow-x:auto;">
<code>${note.content}</code>
</pre>
      `;
                }
            });
        }

        function goToCourse(idx) {
            currentIndex = idx;
            renderSidebar(); // Re-render sidebar to update active state
            renderCourse(idx);
        }

        function goHome() {
            window.history.back();
        }


        // Initial render
        renderSidebar();
        renderCourse(currentIndex);
    </script>
</body>

</html>